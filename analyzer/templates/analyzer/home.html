<!--{#-->
<!--  This template is used to render the home page of the analyzer app.-->
<!--  It includes a form for users to submit a URL for analysis and displays recent searches.}-->
{% extends 'layouts/box.html' %}

{% block content %}
  <h1 class="text-2xl font-semibold -mt-6 text-gray-800">Analyze Your Text</h1>
  <p class="text-gray-600 mb-2">
    Paste a blog, newsletter, tweet-thread or caption below:
  </p>

  <form
    hx-post="{% url 'analyze_text' %}"
    hx-target="#textFragmentContainer"
    hx-swap="innerHTML"
    class="space-y-4 mb-6"
    method="post"
  >
    {% csrf_token %}
    {{ text_form.content }}
    {% if text_form.content.errors %}
      <p class="text-red-600 text-sm">{{ text_form.content.errors.0 }}</p>
    {% endif %}

    <div class="flex items-center space-x-4">
      <button
        type="submit"
        class="px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-full"
      >
        Analyze Text
      </button>
    </div>
  </form>

<!--  <div id="recent-text-searches">-->
<!--    {#% include 'analyzer/text_history.html' %}-->
<!--  </div>-->

  <div id="textFragmentContainer"></div>

  <script>
    document.body.addEventListener('htmx:beforeRequest', function() {
      document.getElementById('loading-overlay').classList.remove('hidden');
    });
    document.body.addEventListener('htmx:afterRequest', function() {
      document.getElementById('loading-overlay').classList.add('hidden');
    });
  </script>
{% endblock %}

