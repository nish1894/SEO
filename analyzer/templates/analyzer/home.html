{% extends 'layouts/box.html' %}

{% block content %}
    <h1 class="text-2xl font-semibold -mt-6 text-gray-800 ">Analyze your Link</h1>
    <p class="text-gray-600 mb-2 ">
      Paste a blog, newsletter, tweet-thread or caption below:
    </p>


    <form
      hx-post="{% url 'analyze' %}"
      hx-target="#psiFragmentContainer"
      hx-swap="innerHTML"
      class="space-y-4 mb-6"
    >
      {% csrf_token %}
      <input
        type="url"
        name="url"
        required
        placeholder="https://example.com"
        class="w-4/5 rounded-xl border px-4 py-2"
      />

        <button type="submit" class="px-2 py-2 bg-indigo-600 text-white rounded">
          Submit
        </button>

    </form>


    <div id="recent-searches" >
        {% include 'analyzer/recent_searches.html' %}
    </div>
    <div id="psiFragmentContainer"></div>


    <script>
      document.body.addEventListener('htmx:beforeRequest', function() {
        document.getElementById('loading-overlay').classList.remove('hidden');
      });
      document.body.addEventListener('htmx:afterRequest', function() {
        document.getElementById('loading-overlay').classList.add('hidden');
      });
    </script>


{% endblock %}
