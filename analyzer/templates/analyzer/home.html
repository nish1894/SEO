{% extends 'layouts/box.html' %}

{% block content %}
  <h1 class="text-2xl font-semibold -mt-6 text-gray-800">Analyze Your Text</h1>
  <p class="text-gray-600 mb-2">
    Paste a blog, newsletter, tweet-thread, or caption below:
  </p>

  <form
    hx-post="{% url 'analyze_text' %}"
    hx-target="#textFragmentContainer"
    hx-swap="innerHTML"
    method="post"
    class="space-y-4 mb-6"
    autocomplete="off"
  >
    {% csrf_token %}
    <textarea id="main-input" name="content" rows="6"
      class="w-full rounded-xl border px-4 py-3 focus:ring-2 focus:ring-indigo-400"
      placeholder="Paste your content here...">{{ content|default_if_none:"" }}</textarea>

    <div class="flex items-center space-x-4">
      <button
        type="submit"
        class="px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-full"
      >
        Analyze Text
      </button>
    </div>
  </form>

  <div id="textFragmentContainer"></div>

  <script>
    // Optional: simple spinner if you want
    document.body.addEventListener('htmx:beforeRequest', function() {
      // show loading spinner if desired
    });
    document.body.addEventListener('htmx:afterRequest', function() {
      // hide spinner
    });
  </script>
{% endblock %}
